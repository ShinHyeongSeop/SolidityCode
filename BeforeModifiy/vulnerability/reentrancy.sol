pragma solidity ^0.6.5;

contract Reentrance {
  mapping(address => uint) public balances; // 주소별로 금액을 관리
  // 기부를 받을 때, 호출되는 함수
  function donate() public payable {
    balances[msg.sender] += msg.value;
  }
  
  // 인출 함수
  function withdraw(uint _amount) public {
    if(balances[msg.sender] >= _amount) {
       (bool chk,) = msg.sender.call{value : _amount}("");
        if(chk)
            balances[msg.sender] -= _amount;
    }
  }
  function totalBalance() public view returns (uint){
      return address(this).balance;
  }
  fallback() external payable {}
}